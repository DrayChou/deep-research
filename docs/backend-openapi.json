{
    "openapi": "3.1.0",
    "info": {
        "title": "CSPC-AI API",
        "description": "Backend API for CSPC-AI application",
        "version": "0.1.0"
    },
    "paths": {
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "认证",
                    "认证"
                ],
                "summary": "Register",
                "description": "注册新用户",
                "operationId": "register_api_v1_auth_register_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/token": {
            "post": {
                "tags": [
                    "认证",
                    "认证"
                ],
                "summary": "Login",
                "description": "用户登录，获取访问令牌\n这个端点专门用于 Swagger UI 的 OAuth2 认证，返回非嵌套格式",
                "operationId": "login_api_v1_auth_token_post",
                "requestBody": {
                    "content": {
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_login_api_v1_auth_token_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "认证",
                    "认证"
                ],
                "summary": "Login Json",
                "description": "使用JSON格式进行用户登录，获取访问令牌",
                "operationId": "login_json_api_v1_auth_login_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Login"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/me": {
            "get": {
                "tags": [
                    "认证",
                    "认证"
                ],
                "summary": "Get Current User Info",
                "description": "获取当前登录用户信息",
                "operationId": "get_current_user_info_api_v1_auth_me_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            }
        },
        "/api/v1/users": {
            "get": {
                "tags": [
                    "用户",
                    "用户"
                ],
                "summary": "Read Users",
                "description": "获取所有用户列表\n- 只有管理员可以执行此操作",
                "operationId": "read_users_api_v1_users_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "用户",
                    "用户"
                ],
                "summary": "Create User",
                "description": "创建新用户\n- 无需身份验证",
                "operationId": "create_user_api_v1_users_post",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/users/me": {
            "get": {
                "tags": [
                    "用户",
                    "用户"
                ],
                "summary": "Read Current User",
                "description": "获取当前登录用户信息",
                "operationId": "read_current_user_api_v1_users_me_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "用户",
                    "用户"
                ],
                "summary": "Update Current User",
                "description": "更新当前登录用户信息",
                "operationId": "update_current_user_api_v1_users_me_put",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserUpdate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            }
        },
        "/api/v1/users/{user_id}": {
            "get": {
                "tags": [
                    "用户",
                    "用户"
                ],
                "summary": "Read User",
                "description": "获取指定ID的用户\n- 只有管理员或用户本人可以执行此操作",
                "operationId": "read_user_api_v1_users__user_id__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "user_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "User Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics": {
            "get": {
                "tags": [
                    "聊天"
                ],
                "summary": "Get Chat Topics",
                "description": "获取当前用户的聊天话题列表",
                "operationId": "get_chat_topics_api_v1_chat_topics_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Create Chat Topic",
                "description": "创建新的聊天话题",
                "operationId": "create_chat_topic_api_v1_chat_topics_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatTopicCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}": {
            "get": {
                "tags": [
                    "聊天"
                ],
                "summary": "Get Chat Topic",
                "description": "获取特定聊天话题的详情",
                "operationId": "get_chat_topic_api_v1_chat_topics__topic_id__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "聊天"
                ],
                "summary": "Update Chat Topic",
                "description": "更新聊天话题信息",
                "operationId": "update_chat_topic_api_v1_chat_topics__topic_id__put",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatTopicUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "聊天"
                ],
                "summary": "Delete Chat Topic",
                "description": "删除聊天话题",
                "operationId": "delete_chat_topic_api_v1_chat_topics__topic_id__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successful Response"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/rename": {
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Rename Topic",
                "description": "基于聊天历史自动重命名话题\n\n该接口会：\n1. 获取指定话题的聊天历史记录\n2. 使用AI模型分析对话内容\n3. 生成一个简洁、准确的新标题\n4. 更新话题标题",
                "operationId": "rename_topic_api_v1_chat_topics__topic_id__rename_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TopicRenameRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TopicRenameResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/metadata": {
            "patch": {
                "tags": [
                    "聊天"
                ],
                "summary": "Update Topic Metadata",
                "description": "更新聊天话题的元数据\n\n此接口支持增量更新：\n- 对于字典类型的值，会进行深度合并\n- 对于列表类型的值，会合并并去重\n- 对于其他类型的值，会直接覆盖",
                "operationId": "update_topic_metadata_api_v1_chat_topics__topic_id__metadata_patch",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true,
                                "title": "Metadata Update"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/messages": {
            "get": {
                "tags": [
                    "聊天"
                ],
                "summary": "Get Chat Messages",
                "description": "获取话题下的所有消息",
                "operationId": "get_chat_messages_api_v1_chat_topics__topic_id__messages_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Send Message",
                "description": "在话题中发送新消息\n\n此接口仅记录消息，不处理AI响应或任务执行",
                "operationId": "send_message_api_v1_chat_topics__topic_id__messages_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatMessageCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/messages/{message_id}": {
            "put": {
                "tags": [
                    "聊天"
                ],
                "summary": "Update Message",
                "description": "修改话题中的特定消息\n\n此接口允许修改消息内容，主要用于AI修正自己的回复或添加更多详细信息",
                "operationId": "update_message_api_v1_chat_topics__topic_id__messages__message_id__put",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "message_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Message Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatMessageCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "聊天"
                ],
                "summary": "Delete Message",
                "description": "删除话题中的特定消息\n删除后，此消息将不再出现在消息列表中，也不会在聊天历史中被包含",
                "operationId": "delete_message_api_v1_chat_topics__topic_id__messages__message_id__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "message_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Message Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/attachments": {
            "get": {
                "tags": [
                    "聊天"
                ],
                "summary": "Get Chat Attachments",
                "description": "获取话题或消息的附件列表",
                "operationId": "get_chat_attachments_api_v1_chat_topics__topic_id__attachments_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "message_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Message Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/chat": {
            "get": {
                "tags": [
                    "聊天"
                ],
                "summary": "Send Message With Ai Response",
                "description": "在话题中发送新消息并获取AI回复\n\n这个统一接口支持两种调用方式：\n1. POST 请求：在请求体中传递 ChatMessageCreate 对象\n2. GET 请求：通过查询参数传递消息内容和参数\n\n根据 stream 参数，决定是返回流式响应还是普通JSON响应：\n- 当 stream=True 时，返回SSE格式的流式响应\n- 当 stream=False 时，一次性返回用户消息和AI回复的JSON\n\n参数说明:\n- prompt: (GET) 用户消息内容\n- agent_id: (GET) 可选的代理ID\n- history_count: 指定历史消息数量，默认20条，最大100条\n- stream: 是否使用流式输出，默认为False\n- prompt_key: 指定使用的提示词模板，可选",
                "operationId": "send_message_with_ai_response_api_v1_chat_topics__topic_id__chat_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "prompt",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Prompt"
                        }
                    },
                    {
                        "name": "agent_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Agent Id"
                        }
                    },
                    {
                        "name": "history_count",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "integer"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "History Count"
                        }
                    },
                    {
                        "name": "prompt_key",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Prompt Key"
                        }
                    },
                    {
                        "name": "stream",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Stream"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "anyOf": [
                                    {
                                        "$ref": "#/components/schemas/ChatMessageCreate"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ],
                                "title": "Message Data"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Send Message With Ai Response",
                "description": "在话题中发送新消息并获取AI回复\n\n这个统一接口支持两种调用方式：\n1. POST 请求：在请求体中传递 ChatMessageCreate 对象\n2. GET 请求：通过查询参数传递消息内容和参数\n\n根据 stream 参数，决定是返回流式响应还是普通JSON响应：\n- 当 stream=True 时，返回SSE格式的流式响应\n- 当 stream=False 时，一次性返回用户消息和AI回复的JSON\n\n参数说明:\n- prompt: (GET) 用户消息内容\n- agent_id: (GET) 可选的代理ID\n- history_count: 指定历史消息数量，默认20条，最大100条\n- stream: 是否使用流式输出，默认为False\n- prompt_key: 指定使用的提示词模板，可选",
                "operationId": "send_message_with_ai_response_api_v1_chat_topics__topic_id__chat_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "prompt",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Prompt"
                        }
                    },
                    {
                        "name": "agent_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Agent Id"
                        }
                    },
                    {
                        "name": "history_count",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "integer"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "History Count"
                        }
                    },
                    {
                        "name": "prompt_key",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Prompt Key"
                        }
                    },
                    {
                        "name": "stream",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Stream"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "anyOf": [
                                    {
                                        "$ref": "#/components/schemas/ChatMessageCreate"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ],
                                "title": "Message Data"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/completions": {
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Openai Chat Completions",
                "description": "OpenAI 兼容的聊天完成接口\n\n这个接口完全独立于话题系统，不会自动保存聊天记录到数据库。\n用户需要在客户端管理聊天历史，并根据需要单独调用其他接口保存记录。\n\n支持的功能：\n- 完整的 OpenAI 聊天参数\n- 工具调用支持\n- 流式和非流式响应\n- 不依赖话题系统\n- 不自动保存聊天记录\n\n使用场景：\n- 临时聊天对话\n- 工具调用测试\n- 客户端自定义历史记录管理\n- 与现有 OpenAI 客户端代码兼容\n\n请求示例:\n```json\n{\n    \"model\": \"gpt-3.5-turbo\",\n    \"messages\": [\n        {\"role\": \"user\", \"content\": \"你好\"}\n    ],\n    \"temperature\": 0.7,\n    \"stream\": false\n}\n```\n\n工具调用示例:\n```json\n{\n    \"model\": \"gpt-3.5-turbo\",\n    \"messages\": [\n        {\"role\": \"user\", \"content\": \"今天天气怎么样？\"}\n    ],\n    \"tools\": [\n        {\n            \"type\": \"function\",\n            \"function\": {\n                \"name\": \"get_weather\",\n                \"description\": \"获取天气信息\",\n                \"parameters\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"location\": {\"type\": \"string\", \"description\": \"城市名称\"}\n                    },\n                    \"required\": [\"location\"]\n                }\n            }\n        }\n    ],\n    \"tool_choice\": \"auto\"\n}\n```",
                "operationId": "openai_chat_completions_api_v1_chat_completions_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatCompletionRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            }
        },
        "/api/v1/chat/topics/{topic_id}/tasks/decompose": {
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Decompose Task",
                "description": "在指定话题中分解任务\n\n这是客户端工作流的第一步，服务器分析任务并生成步骤序列。",
                "operationId": "decompose_task_api_v1_chat_topics__topic_id__tasks_decompose_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TaskDecomposeRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/tasks/{task_id}/execution_plan": {
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Get Client Execution Plan",
                "description": "获取话题中任务的客户端执行计划\n\n这是客户端工作流的第二步，服务器生成详细的客户端执行计划，\n包括需要调用的API、认证要求和结果提交方式。",
                "operationId": "get_client_execution_plan_api_v1_chat_topics__topic_id__tasks__task_id__execution_plan_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "task_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Task Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/tasks/{task_id}/steps/{step_index}/result": {
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Submit Step Result",
                "description": "提交话题中任务的步骤执行结果\n\n客户端执行完步骤后，将结果提交回服务器。\n服务器存储结果并返回下一步指示。",
                "operationId": "submit_step_result_api_v1_chat_topics__topic_id__tasks__task_id__steps__step_index__result_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "task_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Task Id"
                        }
                    },
                    {
                        "name": "step_index",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "title": "Step Index"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StepResultSubmitRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/chat/topics/{topic_id}/tasks/{task_id}/complete": {
            "post": {
                "tags": [
                    "聊天"
                ],
                "summary": "Complete Task",
                "description": "完成话题中的任务\n\n客户端通知服务器所有步骤已完成，请求生成任务完成评估。\n评估结果将存储在话题元数据中。",
                "operationId": "complete_task_api_v1_chat_topics__topic_id__tasks__task_id__complete_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Topic Id"
                        }
                    },
                    {
                        "name": "task_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Task Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TaskCompletionRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/agents": {
            "get": {
                "tags": [
                    "智能体"
                ],
                "summary": "Get Agents",
                "description": "获取智能体列表，可以根据是否公开进行过滤",
                "operationId": "get_agents_api_v1_agents_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "is_public",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Is Public"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "智能体"
                ],
                "summary": "Create Agent",
                "description": "创建新智能体",
                "operationId": "create_agent_api_v1_agents_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AgentCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/agents/{agent_id}": {
            "get": {
                "tags": [
                    "智能体"
                ],
                "summary": "Get Agent",
                "description": "获取智能体详情",
                "operationId": "get_agent_api_v1_agents__agent_id__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "agent_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Agent Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "智能体"
                ],
                "summary": "Update Agent",
                "description": "更新智能体信息",
                "operationId": "update_agent_api_v1_agents__agent_id__put",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "agent_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Agent Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AgentUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "智能体"
                ],
                "summary": "Delete Agent",
                "description": "删除智能体",
                "operationId": "delete_agent_api_v1_agents__agent_id__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "agent_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Agent Id"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successful Response"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/agents/{agent_id}/knowledgebases": {
            "get": {
                "tags": [
                    "智能体"
                ],
                "summary": "Get Agent Knowledgebases",
                "description": "获取与智能体关联的知识库列表",
                "operationId": "get_agent_knowledgebases_api_v1_agents__agent_id__knowledgebases_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "agent_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Agent Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "智能体"
                ],
                "summary": "Link Knowledgebase",
                "description": "关联知识库到智能体",
                "operationId": "link_knowledgebase_api_v1_agents__agent_id__knowledgebases_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "agent_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Agent Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_link_knowledgebase_api_v1_agents__agent_id__knowledgebases_post"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/agents/{agent_id}/knowledgebases/{kb_id}": {
            "delete": {
                "tags": [
                    "智能体"
                ],
                "summary": "Unlink Knowledgebase",
                "description": "移除智能体与知识库的关联",
                "operationId": "unlink_knowledgebase_api_v1_agents__agent_id__knowledgebases__kb_id__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "agent_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Agent Id"
                        }
                    },
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successful Response"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/resources": {
            "get": {
                "tags": [
                    "资源"
                ],
                "summary": "Get Resources",
                "description": "获取资源列表，可以根据是否AI生成、是否公开、文件类型等进行过滤",
                "operationId": "get_resources_api_v1_resources_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "is_ai_generated",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Is Ai Generated"
                        }
                    },
                    {
                        "name": "is_public",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Is Public"
                        }
                    },
                    {
                        "name": "file_type",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "File Type"
                        }
                    },
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "资源"
                ],
                "summary": "Upload Resource",
                "description": "上传新资源",
                "operationId": "upload_resource_api_v1_resources_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_upload_resource_api_v1_resources_post"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/resources/{resource_id}": {
            "get": {
                "tags": [
                    "资源"
                ],
                "summary": "Get Resource",
                "description": "获取资源详情",
                "operationId": "get_resource_api_v1_resources__resource_id__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "resource_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Resource Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "资源"
                ],
                "summary": "Update Resource",
                "description": "更新资源信息",
                "operationId": "update_resource_api_v1_resources__resource_id__put",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "resource_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Resource Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ResourceUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "资源"
                ],
                "summary": "Delete Resource",
                "description": "删除资源",
                "operationId": "delete_resource_api_v1_resources__resource_id__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "resource_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Resource Id"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successful Response"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/knowledgebases": {
            "get": {
                "tags": [
                    "知识库"
                ],
                "summary": "Get Knowledgebases",
                "description": "获取知识库列表，可以根据是否公开进行过滤",
                "operationId": "get_knowledgebases_api_v1_knowledgebases_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "is_public",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Is Public"
                        }
                    },
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "知识库"
                ],
                "summary": "Create Knowledgebase",
                "description": "创建新知识库",
                "operationId": "create_knowledgebase_api_v1_knowledgebases_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/KnowledgeBaseCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/knowledgebases/{kb_id}": {
            "get": {
                "tags": [
                    "知识库"
                ],
                "summary": "Get Knowledgebase",
                "description": "获取知识库详情",
                "operationId": "get_knowledgebase_api_v1_knowledgebases__kb_id__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "知识库"
                ],
                "summary": "Update Knowledgebase",
                "description": "更新知识库信息",
                "operationId": "update_knowledgebase_api_v1_knowledgebases__kb_id__put",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/KnowledgeBaseUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "知识库"
                ],
                "summary": "Delete Knowledgebase",
                "description": "删除知识库",
                "operationId": "delete_knowledgebase_api_v1_knowledgebases__kb_id__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successful Response"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/knowledgebases/{kb_id}/documents": {
            "get": {
                "tags": [
                    "知识库"
                ],
                "summary": "Get Documents",
                "description": "获取知识库下的文档列表",
                "operationId": "get_documents_api_v1_knowledgebases__kb_id__documents_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    },
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 100,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "知识库"
                ],
                "summary": "Upload Document",
                "description": "上传文档到知识库",
                "operationId": "upload_document_api_v1_knowledgebases__kb_id__documents_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_upload_document_api_v1_knowledgebases__kb_id__documents_post"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/knowledgebases/{kb_id}/documents/{doc_id}": {
            "get": {
                "tags": [
                    "知识库"
                ],
                "summary": "Get Document",
                "description": "获取知识库文档详情",
                "operationId": "get_document_api_v1_knowledgebases__kb_id__documents__doc_id__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    },
                    {
                        "name": "doc_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Doc Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "知识库"
                ],
                "summary": "Delete Document",
                "description": "删除知识库文档",
                "operationId": "delete_document_api_v1_knowledgebases__kb_id__documents__doc_id__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "kb_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Kb Id"
                        }
                    },
                    {
                        "name": "doc_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "title": "Doc Id"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successful Response"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/configs": {
            "get": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Read User Configs",
                "description": "获取当前用户的配置列表，可以通过前缀进行过滤",
                "operationId": "read_user_configs_api_v1_configs_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "prefix",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Prefix"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Create User Config",
                "description": "创建用户配置项",
                "operationId": "create_user_config_api_v1_configs_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserConfigCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/configs/{key}": {
            "get": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Read User Config",
                "description": "获取当前用户的特定配置项",
                "operationId": "read_user_config_api_v1_configs__key__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "key",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Key"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Update User Config",
                "description": "更新用户配置项",
                "operationId": "update_user_config_api_v1_configs__key__put",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "key",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Key"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserConfigUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Delete User Config",
                "description": "删除用户配置项",
                "operationId": "delete_user_config_api_v1_configs__key__delete",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "key",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Key"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Successful Response"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/configs/llm/settings": {
            "get": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Read Llm Config",
                "description": "获取当前用户的LLM配置",
                "operationId": "read_llm_config_api_v1_configs_llm_settings_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Create Llm Config",
                "description": "创建或完全更新用户的LLM配置",
                "operationId": "create_llm_config_api_v1_configs_llm_settings_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LLMConfigCreate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "用户配置",
                    "用户配置"
                ],
                "summary": "Update Llm Config",
                "description": "部分更新用户的LLM配置",
                "operationId": "update_llm_config_api_v1_configs_llm_settings_patch",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LLMConfigUpdate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            }
        },
        "/api/v1/streamable/chat": {
            "get": {
                "tags": [
                    "流式聊天",
                    "流式聊天"
                ],
                "summary": "建立流式聊天会话 (Dramatiq版)",
                "description": "初始化一个符合Streamable HTTP协议的聊天会话，返回SSE格式的事件流。\n    为每个连接创建一个Redis订阅。\n    如果提供话题ID，将使用现有话题；否则将创建新话题。\n    返回的响应头中包含会话ID(Mcp-Session-Id)和话题ID(Mcp-Topic-Id)。",
                "operationId": "get_streamable_chat_api_v1_streamable_chat_get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "topic_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "话题ID，如果不提供将创建新话题",
                            "title": "Topic Id"
                        },
                        "description": "话题ID，如果不提供将创建新话题"
                    },
                    {
                        "name": "agent_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "智能体ID，如不提供则使用默认智能体",
                            "title": "Agent Id"
                        },
                        "description": "智能体ID，如不提供则使用默认智能体"
                    },
                    {
                        "name": "Mcp-Session-Id",
                        "in": "header",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Streamable HTTP会话ID",
                            "title": "Mcp-Session-Id"
                        },
                        "description": "Streamable HTTP会话ID"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "返回流式响应，Content-Type为text/event-stream",
                        "content": {
                            "application/json": {
                                "schema": {}
                            },
                            "text/event-stream": {}
                        },
                        "headers": {
                            "Mcp-Session-Id": {
                                "description": "会话ID",
                                "schema": {
                                    "type": "string"
                                }
                            },
                            "Mcp-Topic-Id": {
                                "description": "话题ID",
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "话题或智能体不存在"
                    },
                    "401": {
                        "description": "未认证"
                    },
                    "403": {
                        "description": "无操作权限"
                    },
                    "400": {
                        "description": "请求参数错误"
                    },
                    "503": {
                        "description": "Redis服务不可用"
                    },
                    "500": {
                        "description": "服务器内部错误"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "流式聊天",
                    "流式聊天"
                ],
                "summary": "发送聊天消息到流式会话",
                "description": "向已建立的或新的流式聊天会话发送用户消息，并异步处理响应生成。\n    \n    工作流程：\n    1. 验证或创建会话(session)和话题(topic)\n    2. 提交消息到Dramatiq异步任务队列进行处理\n    3. 立即返回确认响应，包含会话ID、话题ID和任务ID\n    4. 实际的AI回复将通过之前建立的SSE流式连接发送到客户端\n    \n    需要先调用GET /streamable/chat建立流式连接，然后使用本接口发送消息。\n    如提供了已有的会话ID(通过Mcp-Session-Id头)，将使用该会话；否则将创建新会话。",
                "operationId": "create_chat_stream_api_v1_streamable_chat_post",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "Mcp-Session-Id",
                        "in": "header",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Streamable HTTP会话ID，用于关联已建立的流式连接",
                            "title": "Mcp-Session-Id"
                        },
                        "description": "Streamable HTTP会话ID，用于关联已建立的流式连接"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatMessageRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "消息已接收并开始处理",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ChatAcceptedResponse"
                                },
                                "example": {
                                    "status": "accepted",
                                    "message": "消息已接收，开始处理流式响应",
                                    "topic_id": "123e4567-e89b-12d3-a456-426614174000",
                                    "session_id": "987e6543-e21b-43d3-b654-987612345000",
                                    "task_id": "task-123-456-789"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "指定的话题或智能体不存在"
                    },
                    "401": {
                        "description": "未认证，请先登录"
                    },
                    "403": {
                        "description": "无权访问指定的话题"
                    },
                    "400": {
                        "description": "请求参数错误或格式不正确"
                    },
                    "500": {
                        "description": "服务器内部错误或任务提交失败"
                    },
                    "503": {
                        "description": "Redis服务不可用，无法处理请求"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/notification/poll/{channel_id}": {
            "get": {
                "tags": [
                    "通知",
                    "通知"
                ],
                "summary": "轮询获取通知",
                "description": "轮询获取通知。\n    - 如果路径为 /poll/ (channel_id为空字符串)，则获取当前用户的个人通知。\n    - 如果提供了 channel_id (例如 /poll/0)，则获取对应系统频道的通知。\n    客户端应定期调用此接口以获取新通知。\n    使用上次响应中的 last_timestamp 作为请求参数来获取更新的通知。",
                "operationId": "poll_notifications_api_v1_notification_poll__channel_id__get",
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ],
                "parameters": [
                    {
                        "name": "channel_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "description": "通知频道ID。系统频道为0-99的数字。若路径为 /poll/ 则此参数为空字符串，表示用户通知。",
                            "title": "Channel Id"
                        },
                        "description": "通知频道ID。系统频道为0-99的数字。若路径为 /poll/ 则此参数为空字符串，表示用户通知。"
                    },
                    {
                        "name": "last_timestamp",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "description": "上次查询的时间戳",
                            "default": 0,
                            "title": "Last Timestamp"
                        },
                        "description": "上次查询的时间戳"
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 50,
                            "minimum": 1,
                            "default": 10,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功获取通知",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotificationResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "频道不存在或类型不匹配"
                    },
                    "401": {
                        "description": "未认证"
                    },
                    "403": {
                        "description": "无访问权限"
                    },
                    "400": {
                        "description": "请求参数无效"
                    },
                    "500": {
                        "description": "服务器内部错误"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/notification/publish": {
            "post": {
                "tags": [
                    "通知",
                    "通知"
                ],
                "summary": "发布通知",
                "description": "发布系统或用户通知。",
                "operationId": "publish_notification_api_v1_notification_publish_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/NotificationPublishRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NotificationPublishResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "未找到资源"
                    },
                    "401": {
                        "description": "未认证"
                    },
                    "403": {
                        "description": "无操作权限"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "OAuth2PasswordBearer": []
                    },
                    {
                        "APIKeyHeader": []
                    }
                ]
            }
        },
        "/": {
            "get": {
                "summary": "Root",
                "operationId": "root__get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/api/health": {
            "get": {
                "summary": "Health Check",
                "operationId": "health_check_api_health_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "AgentCreate": {
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 100,
                        "minLength": 1,
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 500
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "system_prompt": {
                        "type": "string",
                        "minLength": 1,
                        "title": "System Prompt"
                    },
                    "model": {
                        "type": "string",
                        "minLength": 1,
                        "title": "Model"
                    },
                    "knowledge_base_ids": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Knowledge Base Ids"
                    },
                    "parameters": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Parameters"
                    }
                },
                "type": "object",
                "required": [
                    "name",
                    "system_prompt",
                    "model"
                ],
                "title": "AgentCreate",
                "description": "创建智能体请求模型"
            },
            "AgentUpdate": {
                "properties": {
                    "name": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 100,
                                "minLength": 1
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 500
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "system_prompt": {
                        "anyOf": [
                            {
                                "type": "string",
                                "minLength": 1
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "System Prompt"
                    },
                    "model": {
                        "anyOf": [
                            {
                                "type": "string",
                                "minLength": 1
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Model"
                    },
                    "knowledge_base_ids": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Knowledge Base Ids"
                    },
                    "parameters": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Parameters"
                    },
                    "is_active": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Is Active"
                    }
                },
                "type": "object",
                "title": "AgentUpdate",
                "description": "更新智能体请求模型"
            },
            "Body_link_knowledgebase_api_v1_agents__agent_id__knowledgebases_post": {
                "properties": {
                    "knowledge_base_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Knowledge Base Id"
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_id"
                ],
                "title": "Body_link_knowledgebase_api_v1_agents__agent_id__knowledgebases_post"
            },
            "Body_login_api_v1_auth_token_post": {
                "properties": {
                    "grant_type": {
                        "anyOf": [
                            {
                                "type": "string",
                                "pattern": "^password$"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Grant Type"
                    },
                    "username": {
                        "type": "string",
                        "title": "Username"
                    },
                    "password": {
                        "type": "string",
                        "title": "Password"
                    },
                    "scope": {
                        "type": "string",
                        "title": "Scope",
                        "default": ""
                    },
                    "client_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Client Id"
                    },
                    "client_secret": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Client Secret"
                    }
                },
                "type": "object",
                "required": [
                    "username",
                    "password"
                ],
                "title": "Body_login_api_v1_auth_token_post"
            },
            "Body_upload_document_api_v1_knowledgebases__kb_id__documents_post": {
                "properties": {
                    "file": {
                        "type": "string",
                        "format": "binary",
                        "title": "File"
                    },
                    "title": {
                        "type": "string",
                        "title": "Title"
                    }
                },
                "type": "object",
                "required": [
                    "file"
                ],
                "title": "Body_upload_document_api_v1_knowledgebases__kb_id__documents_post"
            },
            "Body_upload_resource_api_v1_resources_post": {
                "properties": {
                    "file": {
                        "type": "string",
                        "format": "binary",
                        "title": "File"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "is_public": {
                        "type": "boolean",
                        "title": "Is Public",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "file"
                ],
                "title": "Body_upload_resource_api_v1_resources_post"
            },
            "ChatAcceptedResponse": {
                "properties": {
                    "status": {
                        "type": "string",
                        "title": "Status",
                        "description": "请求状态，固定为'accepted'",
                        "default": "accepted"
                    },
                    "message": {
                        "type": "string",
                        "title": "Message",
                        "description": "状态描述消息"
                    },
                    "topic_id": {
                        "type": "string",
                        "title": "Topic Id",
                        "description": "话题ID"
                    },
                    "session_id": {
                        "type": "string",
                        "title": "Session Id",
                        "description": "会话ID"
                    },
                    "task_id": {
                        "type": "string",
                        "title": "Task Id",
                        "description": "任务ID"
                    }
                },
                "type": "object",
                "required": [
                    "message",
                    "topic_id",
                    "session_id",
                    "task_id"
                ],
                "title": "ChatAcceptedResponse",
                "description": "聊天消息接收确认响应模型",
                "example": {
                    "message": "消息已接收，开始处理流式响应",
                    "session_id": "987e6543-e21b-43d3-b654-987612345000",
                    "status": "accepted",
                    "task_id": "task-123-456-789",
                    "topic_id": "123e4567-e89b-12d3-a456-426614174000"
                }
            },
            "ChatCompletionRequest": {
                "properties": {
                    "messages": {
                        "items": {
                            "additionalProperties": true,
                            "type": "object"
                        },
                        "type": "array",
                        "title": "Messages"
                    },
                    "model": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Model"
                    },
                    "temperature": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Temperature",
                        "default": 0.7
                    },
                    "top_p": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Top P",
                        "default": 1.0
                    },
                    "n": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "N",
                        "default": 1
                    },
                    "max_tokens": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Max Tokens"
                    },
                    "stop": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Stop"
                    },
                    "presence_penalty": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Presence Penalty",
                        "default": 0
                    },
                    "frequency_penalty": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Frequency Penalty",
                        "default": 0
                    },
                    "logit_bias": {
                        "anyOf": [
                            {
                                "additionalProperties": {
                                    "type": "number"
                                },
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Logit Bias"
                    },
                    "user": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "User"
                    },
                    "stream": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Stream",
                        "default": false
                    },
                    "tools": {
                        "anyOf": [
                            {
                                "items": {
                                    "additionalProperties": true,
                                    "type": "object"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tools",
                        "description": "可用的工具列表，OpenAI格式"
                    },
                    "tool_choice": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tool Choice",
                        "description": "工具选择策略，'auto'、'none'或指定工具"
                    },
                    "response_format": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Response Format",
                        "description": "响应格式，支持JSON mode等"
                    }
                },
                "type": "object",
                "required": [
                    "messages"
                ],
                "title": "ChatCompletionRequest",
                "description": "聊天完成请求模型（流式和非流式共用）"
            },
            "ChatMessageCreate": {
                "properties": {
                    "content": {
                        "type": "string",
                        "title": "Content"
                    },
                    "role": {
                        "type": "string",
                        "title": "Role",
                        "default": "user"
                    },
                    "topic_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Topic Id"
                    },
                    "agent_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Agent Id"
                    },
                    "history_count": {
                        "type": "integer",
                        "maximum": 100.0,
                        "minimum": 0.0,
                        "title": "History Count",
                        "default": 20
                    },
                    "prompt_key": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Prompt Key"
                    },
                    "stream": {
                        "type": "boolean",
                        "title": "Stream",
                        "default": false
                    },
                    "tool_results": {
                        "anyOf": [
                            {
                                "items": {
                                    "additionalProperties": true,
                                    "type": "object"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tool Results",
                        "description": "工具执行结果"
                    },
                    "tools": {
                        "anyOf": [
                            {
                                "items": {
                                    "additionalProperties": true,
                                    "type": "object"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tools",
                        "description": "工具调用参数"
                    },
                    "tool_choice": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tool Choice",
                        "description": "指定调用的工具名称"
                    },
                    "metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Metadata",
                        "description": "消息相关的元数据"
                    }
                },
                "type": "object",
                "required": [
                    "content"
                ],
                "title": "ChatMessageCreate",
                "description": "创建聊天消息"
            },
            "ChatMessageRequest": {
                "properties": {
                    "content": {
                        "type": "string",
                        "title": "Content",
                        "description": "消息内容"
                    },
                    "topic_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Topic Id",
                        "description": "话题ID，如果不提供则使用会话中存储的话题ID"
                    },
                    "agent_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Agent Id",
                        "description": "智能体ID，如不提供则使用默认智能体"
                    },
                    "history_count": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "History Count",
                        "description": "历史消息数量，默认为20",
                        "default": 20
                    },
                    "prompt_key": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Prompt Key",
                        "description": "提示词模板的键名"
                    }
                },
                "type": "object",
                "required": [
                    "content"
                ],
                "title": "ChatMessageRequest",
                "description": "聊天消息请求模型",
                "example": {
                    "agent_id": "123e4567-e89b-12d3-a456-426614174001",
                    "content": "你好，请介绍一下自己",
                    "history_count": 20,
                    "prompt_key": "default",
                    "topic_id": "123e4567-e89b-12d3-a456-426614174000"
                }
            },
            "ChatTopicCreate": {
                "properties": {
                    "title": {
                        "type": "string",
                        "title": "Title",
                        "description": "话题标题"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description",
                        "description": "话题描述"
                    },
                    "agent_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Agent Id",
                        "description": "代理ID或代理类型标识符"
                    },
                    "metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Metadata",
                        "description": "元数据"
                    },
                    "available_tools": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Available Tools",
                        "description": "可用工具列表"
                    }
                },
                "type": "object",
                "required": [
                    "title"
                ],
                "title": "ChatTopicCreate",
                "description": "聊天话题创建模型"
            },
            "ChatTopicUpdate": {
                "properties": {
                    "title": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Title"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "agent_id": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "uuid"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Agent Id"
                    },
                    "topic_metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Topic Metadata",
                        "description": "话题元数据（将与现有元数据合并）"
                    }
                },
                "type": "object",
                "title": "ChatTopicUpdate",
                "description": "更新聊天话题"
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "KnowledgeBaseCreate": {
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 100,
                        "minLength": 1,
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 500
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "embedding_model": {
                        "type": "string",
                        "minLength": 1,
                        "title": "Embedding Model"
                    },
                    "resource_ids": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Resource Ids"
                    },
                    "parameters": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Parameters"
                    }
                },
                "type": "object",
                "required": [
                    "name",
                    "embedding_model"
                ],
                "title": "KnowledgeBaseCreate",
                "description": "创建知识库请求模型"
            },
            "KnowledgeBaseUpdate": {
                "properties": {
                    "name": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 100,
                                "minLength": 1
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 500
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "embedding_model": {
                        "anyOf": [
                            {
                                "type": "string",
                                "minLength": 1
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Embedding Model"
                    },
                    "resource_ids": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Resource Ids"
                    },
                    "parameters": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Parameters"
                    },
                    "is_active": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Is Active"
                    }
                },
                "type": "object",
                "title": "KnowledgeBaseUpdate",
                "description": "更新知识库请求模型"
            },
            "LLMConfigCreate": {
                "properties": {
                    "api_base_url": {
                        "type": "string",
                        "minLength": 1,
                        "title": "Api Base Url"
                    },
                    "api_key": {
                        "type": "string",
                        "minLength": 1,
                        "title": "Api Key"
                    },
                    "api_model": {
                        "type": "string",
                        "minLength": 1,
                        "title": "Api Model"
                    }
                },
                "type": "object",
                "required": [
                    "api_base_url",
                    "api_key",
                    "api_model"
                ],
                "title": "LLMConfigCreate",
                "description": "创建LLM配置的请求模型"
            },
            "LLMConfigUpdate": {
                "properties": {
                    "api_base_url": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Api Base Url"
                    },
                    "api_key": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Api Key"
                    },
                    "api_model": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Api Model"
                    }
                },
                "type": "object",
                "title": "LLMConfigUpdate",
                "description": "更新LLM配置的请求模型"
            },
            "Login": {
                "properties": {
                    "username": {
                        "type": "string",
                        "title": "Username"
                    },
                    "password": {
                        "type": "string",
                        "title": "Password"
                    }
                },
                "type": "object",
                "required": [
                    "username",
                    "password"
                ],
                "title": "Login",
                "description": "登录请求"
            },
            "NotificationItem": {
                "properties": {
                    "id": {
                        "type": "string",
                        "title": "Id",
                        "description": "通知唯一ID"
                    },
                    "message_type": {
                        "type": "string",
                        "title": "Message Type",
                        "description": "消息类型"
                    },
                    "content": {
                        "type": "string",
                        "title": "Content",
                        "description": "消息内容"
                    },
                    "data": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Data",
                        "description": "附加数据"
                    },
                    "timestamp": {
                        "type": "string",
                        "title": "Timestamp",
                        "description": "通知发送时间 (ISO 8601格式)"
                    },
                    "sender_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Sender Id",
                        "description": "发送者ID"
                    },
                    "priority": {
                        "type": "string",
                        "title": "Priority",
                        "description": "消息优先级: high, normal, low",
                        "default": "normal"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "message_type",
                    "content",
                    "timestamp"
                ],
                "title": "NotificationItem",
                "description": "通知消息项"
            },
            "NotificationPublishRequest": {
                "properties": {
                    "message_type": {
                        "type": "string",
                        "title": "Message Type",
                        "description": "消息类型，如 'system_notification'、'config_update' 等"
                    },
                    "content": {
                        "type": "string",
                        "title": "Content",
                        "description": "消息内容"
                    },
                    "data": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Data",
                        "description": "附加数据"
                    },
                    "priority": {
                        "type": "string",
                        "title": "Priority",
                        "description": "消息优先级: high, normal, low",
                        "default": "normal"
                    },
                    "target_type": {
                        "type": "string",
                        "title": "Target Type",
                        "description": "目标类型: system 或 user"
                    },
                    "channel_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Channel Id",
                        "description": "系统频道ID (当target_type为system时使用)"
                    },
                    "user_ids": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "User Ids",
                        "description": "要通知的用户ID列表 (当target_type为user时使用)"
                    }
                },
                "type": "object",
                "required": [
                    "message_type",
                    "content",
                    "target_type"
                ],
                "title": "NotificationPublishRequest",
                "description": "通知发布请求"
            },
            "NotificationPublishResponse": {
                "properties": {
                    "status": {
                        "type": "string",
                        "title": "Status",
                        "description": "操作状态",
                        "default": "success"
                    },
                    "message": {
                        "type": "string",
                        "title": "Message",
                        "description": "状态描述"
                    },
                    "notification_id": {
                        "type": "string",
                        "title": "Notification Id",
                        "description": "通知ID"
                    },
                    "affected_channels": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Affected Channels",
                        "description": "受影响的频道列表"
                    }
                },
                "type": "object",
                "required": [
                    "message",
                    "notification_id",
                    "affected_channels"
                ],
                "title": "NotificationPublishResponse",
                "description": "通知发布响应"
            },
            "NotificationResponse": {
                "properties": {
                    "notifications": {
                        "items": {
                            "$ref": "#/components/schemas/NotificationItem"
                        },
                        "type": "array",
                        "title": "Notifications",
                        "description": "通知列表"
                    },
                    "total_count": {
                        "type": "integer",
                        "title": "Total Count",
                        "description": "符合条件的通知总数"
                    },
                    "last_timestamp": {
                        "type": "number",
                        "title": "Last Timestamp",
                        "description": "最后一条通知的时间戳，用于下次轮询"
                    },
                    "has_more": {
                        "type": "boolean",
                        "title": "Has More",
                        "description": "是否还有更多通知",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "notifications",
                    "total_count",
                    "last_timestamp"
                ],
                "title": "NotificationResponse",
                "description": "通知列表响应"
            },
            "ResourceUpdate": {
                "properties": {
                    "name": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 100,
                                "minLength": 1
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 500
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "is_active": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Is Active"
                    }
                },
                "type": "object",
                "title": "ResourceUpdate",
                "description": "更新资源请求模型"
            },
            "StepResultSubmitRequest": {
                "properties": {
                    "step_index": {
                        "type": "integer",
                        "title": "Step Index",
                        "description": "步骤索引"
                    },
                    "result": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Result",
                        "description": "步骤结果"
                    },
                    "tool_results": {
                        "items": {
                            "additionalProperties": true,
                            "type": "object"
                        },
                        "type": "array",
                        "title": "Tool Results",
                        "description": "工具调用结果列表"
                    },
                    "metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Metadata",
                        "description": "元数据"
                    }
                },
                "type": "object",
                "required": [
                    "step_index",
                    "result"
                ],
                "title": "StepResultSubmitRequest",
                "description": "步骤结果提交请求"
            },
            "TaskCompletionRequest": {
                "properties": {
                    "completion_summary": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Completion Summary",
                        "description": "完成摘要"
                    },
                    "metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Metadata",
                        "description": "元数据"
                    }
                },
                "type": "object",
                "title": "TaskCompletionRequest",
                "description": "任务完成请求"
            },
            "TaskDecomposeRequest": {
                "properties": {
                    "task_description": {
                        "type": "string",
                        "title": "Task Description",
                        "description": "任务描述"
                    },
                    "max_steps": {
                        "type": "integer",
                        "title": "Max Steps",
                        "description": "最大步骤数量",
                        "default": 5
                    },
                    "locale": {
                        "type": "string",
                        "title": "Locale",
                        "description": "语言设置",
                        "default": "zh-CN"
                    },
                    "metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Metadata",
                        "description": "元数据"
                    }
                },
                "type": "object",
                "required": [
                    "task_description"
                ],
                "title": "TaskDecomposeRequest",
                "description": "任务分解请求"
            },
            "TopicRenameRequest": {
                "properties": {
                    "message_limit": {
                        "anyOf": [
                            {
                                "type": "integer",
                                "maximum": 50.0,
                                "minimum": 1.0
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Message Limit",
                        "description": "用于生成标题的消息数量限制，默认为10条，最多50条",
                        "default": 10
                    }
                },
                "type": "object",
                "title": "TopicRenameRequest",
                "description": "话题重命名请求"
            },
            "TopicRenameResponse": {
                "properties": {
                    "topic_id": {
                        "type": "string",
                        "format": "uuid",
                        "title": "Topic Id",
                        "description": "话题ID"
                    },
                    "old_title": {
                        "type": "string",
                        "title": "Old Title",
                        "description": "原标题"
                    },
                    "new_title": {
                        "type": "string",
                        "title": "New Title",
                        "description": "新生成的标题"
                    },
                    "success": {
                        "type": "boolean",
                        "title": "Success",
                        "description": "是否成功生成并更新标题"
                    }
                },
                "type": "object",
                "required": [
                    "topic_id",
                    "old_title",
                    "new_title",
                    "success"
                ],
                "title": "TopicRenameResponse",
                "description": "话题重命名响应"
            },
            "UserConfigCreate": {
                "properties": {
                    "key": {
                        "type": "string",
                        "maxLength": 50,
                        "minLength": 1,
                        "title": "Key"
                    },
                    "value": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Value"
                    }
                },
                "type": "object",
                "required": [
                    "key"
                ],
                "title": "UserConfigCreate",
                "description": "创建用户配置请求模型"
            },
            "UserConfigUpdate": {
                "properties": {
                    "value": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Value"
                    }
                },
                "type": "object",
                "title": "UserConfigUpdate",
                "description": "更新用户配置请求模型"
            },
            "UserCreate": {
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "title": "Email"
                    },
                    "username": {
                        "type": "string",
                        "title": "Username"
                    },
                    "is_active": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Is Active",
                        "default": true
                    },
                    "is_admin": {
                        "type": "boolean",
                        "title": "Is Admin",
                        "default": false
                    },
                    "full_name": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Full Name"
                    },
                    "password": {
                        "type": "string",
                        "title": "Password"
                    }
                },
                "type": "object",
                "required": [
                    "email",
                    "username",
                    "password"
                ],
                "title": "UserCreate",
                "description": "创建用户"
            },
            "UserUpdate": {
                "properties": {
                    "email": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "email"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Email"
                    },
                    "username": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Username"
                    },
                    "is_active": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Is Active",
                        "default": true
                    },
                    "is_admin": {
                        "type": "boolean",
                        "title": "Is Admin",
                        "default": false
                    },
                    "full_name": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Full Name"
                    },
                    "password": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Password"
                    }
                },
                "type": "object",
                "title": "UserUpdate",
                "description": "更新用户"
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            }
        },
        "securitySchemes": {
            "OAuth2PasswordBearer": {
                "type": "oauth2",
                "flows": {
                    "password": {
                        "scopes": {},
                        "tokenUrl": "/api/v1/auth/token"
                    }
                }
            },
            "APIKeyHeader": {
                "type": "apiKey",
                "in": "header",
                "name": "Authorization"
            }
        }
    }
}